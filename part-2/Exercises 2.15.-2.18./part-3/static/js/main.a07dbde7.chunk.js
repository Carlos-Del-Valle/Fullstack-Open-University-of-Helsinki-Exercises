(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t(15),a=t.n(c),u=t(6),o=t(3),i=t(0),s=function(e){return Object(i.jsxs)("div",{children:["Filter by Name:"," ",Object(i.jsx)("input",{onChange:e.handleFilterChange,value:e.value})]})},l=function(e){return Object(i.jsx)("div",{children:Object(i.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(i.jsxs)("div",{children:["Name:"," ",Object(i.jsx)("input",{onChange:e.handleNameChange,value:e.nameValue})]}),Object(i.jsxs)("div",{children:["Number:"," ",Object(i.jsx)("input",{onChange:e.handleNumberChange,value:e.numberValue})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"Add"})})]})})},d=function(e){return Object(i.jsxs)("div",{children:[Object(i.jsx)("strong",{children:"Name:"})," ",e.name," ",Object(i.jsx)("strong",{children:"Number:"})," ",e.number," ",Object(i.jsx)("button",{"data-id":e.id,onClick:e.handleClick,children:"Delete"})]})},b=function(e){var n=e.persons,t=e.handleClick,r=n.map((function(e){return Object(i.jsx)(d,{id:e.id,name:e.name,number:e.number,handleClick:t},e.id)}));return Object(i.jsx)("div",{children:r})},j=function(e){var n=e.message;return null===n?null:Object(i.jsx)("div",{className:"addedStyle",children:n})},h=function(e){var n=e.message;return null===n?null:Object(i.jsx)("div",{className:"errorStyle",children:n})},f=t(4),m=t.n(f),O="http://localhost:3001/api/persons",v=function(){return m.a.get(O).then((function(e){return e.data}))},p=function(e){return m.a.post(O,e).then((function(e){return e.data}))},x=function(e,n){return m.a.put("".concat(O,"/").concat(e),n).then((function(e){return e.data}))},g=function(e){return m.a.delete("".concat(O,"/").concat(e))},C=function(){var e=Object(r.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],a=Object(r.useState)(""),d=Object(o.a)(a,2),f=d[0],m=d[1],O=Object(r.useState)(""),C=Object(o.a)(O,2),w=C[0],N=C[1],k=Object(r.useState)(""),S=Object(o.a)(k,2),y=S[0],L=S[1],P=Object(r.useState)(""),T=Object(o.a)(P,2),F=T[0],A=T[1],U=Object(r.useState)(""),V=Object(o.a)(U,2),D=V[0],E=V[1];Object(r.useEffect)((function(){v().then((function(e){c(e)}))}),[]);var I=t.filter((function(e){return e.name.toLocaleLowerCase().includes(y.toLowerCase())})),J=function(e,n){switch(n){case"nameFilter":L(e.target.value);break;case"name":m(e.target.value);break;case"number":N(e.target.value)}},z=function(e){if(e.preventDefault(),t.some((function(e){return e.name.toLowerCase()===f.toLowerCase()})))(function(){var e=t.find((function(e){return e.name.toLowerCase()===f.toLowerCase()}));if(window.confirm("".concat(e.name," is already added to the phonebook, ")+"replace the old number with a new one?")){var n=Object(u.a)(Object(u.a)({},e),{},{number:w}),r=e.id;return x(r,n).then((function(e){return c(t.map((function(n){return n.id!==r?n:e}))),!0})).catch((function(n){console.error(n),E("The person ".concat(e.name," does not exist on the server")),setTimeout((function(){E(null)}),5e3),c(t.filter((function(e){return e.id!==r})))}))}return Promise.resolve(!1)})().then((function(e){e?console.log("Person Updated Successfully"):console.log("User Opted Not To Update Person")}));else{var n=function(){var e={name:f.replace(/\b([a-zA-Z])(\w+)/g,(function(e,n,t){return n.toUpperCase()+t.toLocaleLowerCase()})),number:w};return A("Added '".concat(e.name,"'")),setTimeout((function(){A(null)}),5e3),e}();p(n).then((function(e){c(t.concat(e))}))}m(""),N("")},B=function(e,n){switch(n){case"deletePerson":var r=parseInt(e.target.dataset.id);if(Number.isNaN(r)||!r)break;var a=t.find((function(e){return e.id===r}));window.confirm("Delete ".concat(a.name,"?"))&&function(e){var n=!0;g(e).catch((function(e){console.log(e),E("The person does not exist on the server"),setTimeout((function(){E(null)}),5e3),n=!1})).finally((function(){n&&c(t.filter((function(n){return n.id!==e})))}))}(r)}};return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(j,{message:F}),Object(i.jsx)(h,{message:D}),Object(i.jsx)(s,{handleFilterChange:function(e){return J(e,"nameFilter")},value:y}),Object(i.jsx)("h3",{children:"Add a New:"}),Object(i.jsx)(l,{nameValue:f,numberValue:w,handleSubmit:function(e){return z(e)},handleNameChange:function(e){return J(e,"name")},handleNumberChange:function(e){return J(e,"number")}}),Object(i.jsx)("h3",{children:"Numbers"}),Object(i.jsx)(b,{persons:I,handleClick:function(e){return B(e,"deletePerson")}})]})};t(39);a.a.render(Object(i.jsx)(C,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.a07dbde7.chunk.js.map